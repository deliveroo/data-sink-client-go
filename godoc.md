

# datasink
`import "github.com/deliveroo/data-sink-client-go"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)
* [Subdirectories](#pkg-subdirectories)

## <a name="pkg-overview">Overview</a>



## <a name="pkg-index">Index</a>
* [func Compress(body []byte) ([]byte, error)](#Compress)
* [type Client](#Client)
  * [func NewClient(url string, http Doer) (Client, error)](#NewClient)
* [type Doer](#Doer)
* [type Message](#Message)
* [type Mock](#Mock)
  * [func NewMockClient() Mock](#NewMockClient)
  * [func (m *Mock) Post(_ Stream, msg Message) error](#Mock.Post)
  * [func (m *Mock) PostGzipped(stream Stream, msg Message) error](#Mock.PostGzipped)
* [type Stream](#Stream)


#### <a name="pkg-files">Package files</a>
[client.go](/src/github.com/deliveroo/data-sink-client-go/client.go) [mock.go](/src/github.com/deliveroo/data-sink-client-go/mock.go) 





## <a name="Compress">func</a> [Compress](./client.go?s=2417:2459#L100)
``` go
func Compress(body []byte) ([]byte, error)
```
Compress GZIPs a message payload.




## <a name="Client">type</a> [Client](./client.go?s=386:651#L22)
``` go
type Client interface {
    // Post sends a Message to Data Sink.
    // A new line is appended to the body and the body gzipped before being sent.
    Post(Stream, Message) error

    // Post sends an already gzipped Message to Data Sink.
    PostGzipped(Stream, Message) error
}
```
Client is an interface for sending data to Data Sink.







### <a name="NewClient">func</a> [NewClient](./client.go?s=1200:1253#L51)
``` go
func NewClient(url string, http Doer) (Client, error)
```
NewClient creates a new Data Sink client using the URL of the server and a
HTTP client that conforms to the Doer interface.
If requests should be retried or done via a circuit breaker, this must be
provided by the HTTP client.





## <a name="Doer">type</a> [Doer](./client.go?s=810:876#L34)
``` go
type Doer interface {
    Do(*http.Request) (*http.Response, error)
}
```
Doer is a generic HTTP client interface.
It is implemented by net/http's *http.Client, as well as other more advanced
clients like heimdall.Client.










## <a name="Message">type</a> [Message](./client.go?s=308:327#L19)
``` go
type Message []byte
```
Message is the payload to be sent to the Data Sink stream.










## <a name="Mock">type</a> [Mock](./mock.go?s=181:220#L5)
``` go
type Mock struct {
    Messages [][]byte
}

```
Mock is a fake Client which allows the received messages to be inspected.
Messages are stored exactly as they are sent to the client (e.g. still [un]gziped)







### <a name="NewMockClient">func</a> [NewMockClient](./mock.go?s=266:291#L10)
``` go
func NewMockClient() Mock
```
NewMockClient creates a new Mock client.





### <a name="Mock.Post">func</a> (\*Mock) [Post](./mock.go?s=356:404#L15)
``` go
func (m *Mock) Post(_ Stream, msg Message) error
```
Post sends a message to the Mock client.




### <a name="Mock.PostGzipped">func</a> (\*Mock) [PostGzipped](./mock.go?s=567:627#L22)
``` go
func (m *Mock) PostGzipped(stream Stream, msg Message) error
```
PostGzipped sends a new message to the Mock client.
The message is stored exactly as it is received.




## <a name="Stream">type</a> [Stream](./client.go?s=180:244#L13)
``` go
type Stream struct {
    ID           string
    PartitionKey string
}

```
Stream describes the Data Sink stream which a Message is to be sent to.














- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)
